<?php//// драйвер БД//class MSQL {			private static $instance;	// экземпляр класса			public static function Instance() 	{		if (self::$instance == null)		self::$instance = new MSQL();				return self::$instance;	}		//	// Выборка строк	// $query    	- полный текст SQL запроса	// результат	- массив выбранных объектов	//	public function Select($query)	{		// Запрос.					$result = mysql_query($query);									if (!$result)			die(mysql_error().$query);				// Извлечение из БД.				$n = mysql_num_rows($result);		//echo "ff-".$n ;		//var_dump($result);		$arr = array();    					for ($i = 0; $i < $n; $i++)		{			$row = mysql_fetch_assoc($result);					$arr[] = $row;					}			return $arr;	}					//	// Вставка строки	// $table 		- имя таблицы	// $object 		- ассоциативный массив с парами вида "имя столбца - значение"	// результат	- идентификатор новой строки	//	public function Insert($table, $object)	{		//die(var_dump($object));		$columns = array();			$values = array();					foreach ($object as $key => $val) 		{		    //$key = htmlspecialchars($key); 			//$key = strip_tags($key);			$columns[] = mysql_real_escape_string($key. '');				if ($val === null)					$values[] = 'NULL';				else 				{					//$val = htmlspecialchars($val);					//$val = strip_tags($val);					$value = mysql_real_escape_string($val. '');					$values[] = "'$value'";				}		}		$columns_s = implode(',',$columns);		$values_s = implode(',',$values);				// Запрос.		$query = "INSERT INTO $table ($columns_s) VALUES ($values_s)";			//die($query);		//die($query);			$result = mysql_query($query);		//die(var_dump($result));							//if (!$result) 	die(mysql_error()); //убрано чтобы при добавлении одинаковых записей не выходило ошибок (потом можно будет с кодом ошибки помутить)		//die(mysql_error());		return mysql_insert_id();	}		//	// Изменение строк	// $table 		- имя таблицы	// $object 		- ассоциативный массив с парами вида "имя столбца - значение"	// $where		- условие (часть SQL запроса)	// результат	- число измененных строк	//		public function Update($table, $object, $where)	{		$set = array();		$set_s = array();							foreach ($object as $key => $val) 		{		    //$key = htmlspecialchars($key); 			//$key = strip_tags($key);		    			$key = mysql_real_escape_string($key. '');				if ($val === null)					$value = "$key=NULL";				else 				{ 					//$val = htmlspecialchars($val);					//$val = strip_tags($val);					$value = mysql_real_escape_string($val. '');									}					$set[] = "$key='$value'"; 		}		$set_s = implode(',',$set);				// Запрос.		$query = "UPDATE $table SET $set_s WHERE $where";				//die($query);		//$query = "INSERT INTO $table ($columns_s) VALUES ($values_s)";			$result = mysql_query($query);									if (!$result){			//echo $query;			die("uPDATE НЕ ПРОШЕЛ");		}		return mysql_affected_rows();					}		//	// Удаление строк	// $table 		- имя таблицы	// $where		- условие (часть SQL запроса)		// результат	- число удаленных строк	//			public function Delete($table,$where)	{		$query = "DELETE FROM $table WHERE $where" ;			             		$result = mysql_query($query) or die(mysql_error());		return mysql_affected_rows();	}	}